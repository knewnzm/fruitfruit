<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.fruitfruit.order.OrderMapper">
	<resultMap type="com.project.fruitfruit.order.Order" id="order">
		<result property="order_num" column="order_num" />
		<result property="order_id" column="order_id" />
		<result property="product_seller_id" column="product_seller_id" />
		<result property="order_count" column="order_count" />
		<result property="order_type" column="order_type" />	
	</resultMap>
	
	<insert id="insertOrder" parameterType="com.project.fruitfruit.order.Order"> <!-- 주문 등록 -->
	insert into order values(seq_order.nextval, #{order_id}, #{product_seller_id}, #{order_count}, 0)
	</insert>
	
	<select id="selectOrderByOrderId" parameterType="String" resultMap="order"> <!-- 구매자 아이디와 일치하는 주문 목록 출력 -->
	select* from order where order_id=#{order_id}
	</select>
	
	<select id="selectOrderBySellerId" parameterType="String" resultMap="order"> <!-- 판매자 아이디와 일치하는 주문 목록 출력 -->
	select* from order where product_seller_id=#{product_seller_id}
	</select>
	
	<update id="updateOrderType" parameterType="int"> <!-- 주문번호에 해당하는 주문타입 1상승 -->
	update order set order_type=order_type+1 where order_num=#{order_num}
	</update>
	
	<update id="updateOrderType0" parameterType="int"> <!-- 주문번호에 해당하는 주문 취소 -->
	update order set order_type=0 where order_num=#{order_num}
	</update>
	
	<delete id="deleteOrder" parameterType="int" > <!-- 주문번호에 해당하는 주문 데이터 삭제-->
	delete from order where order_num=#{order_num}
	</delete>
</mapper>

